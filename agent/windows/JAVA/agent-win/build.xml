<?xml version="1.0" encoding="UTF-8"?>
<project>
	<property file="build.properties"></property>
	
	<path id="cp">
		<fileset dir="${lib.dir}" includes="*.jar" />
	</path>
	
	<target name="clean">
		<delete dir="${bin.dir}" />
		<delete dir="${doc.dir}" />
		<delete dir="${dist.dir}" />
	</target>
	
	<target name="init" depends="clean">
		<mkdir dir="${bin.dir}" />
		<mkdir dir="${dist.dir}" />
	</target>
	
	<target name="compile" depends="init">
		<echo>Beginning compilation...</echo>
		<javac destdir="bin" debug="true" srcdir="${src.dir}" includeantruntime="false">
			<classpath refid="cp" />
		</javac>
	</target>
	
	<target name="doc" depends="init" description="Generate documentation">
		<javadoc sourcepath="${src.dir}" destdir="${doc.dir}" />
	</target>
	
	<target name="builddist" depends="compile,doc">
		<echo>Building the SRVMON AGENT....</echo>
		<jar destfile="${dist.dir}/srvmon-agent.jar" basedir="${bin.dir}">
			<zipgroupfileset dir="${lib.dir}" includes="*.jar" />
			<manifest>
				<attribute name="Main-Class" value="de.scrubstudios.srvmon.agent.Main"/>
			</manifest>
		</jar>
		<echo>Build OK!</echo>
	</target>
</project>